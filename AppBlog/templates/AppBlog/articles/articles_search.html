{% extends 'AppBlog/base.html' %}

{% block title %} Buscador {% endblock %}

{% block content %} 
<h2>Buscar Artículos</h2>

<form method="get">
  <input type="text" name="q" placeholder="Buscar por título, resumen, materia, autor o fecha" value="{{ query }}">
  <button type="submit">Buscar</button>
</form>

<hr>

{% if query %}
  {% if articles %}
    <ul>
      {% for article in articles %}
        <li>
          <strong>{{ article.title }}</strong><br>
          <em>Autor:</em> {{ article.author.get_full_name }}<br>
          <em>Materia:</em> {{ article.subject }}<br>
          <em>Resumen:</em> {{ article.resume|truncatewords:20 }}<br>
          <em>Fecha:</em> {{ article.date_of_publication }}<br>
          <a href="{% url 'article_detail' article.id %}">Ver detalles</a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No se encontraron resultados para "{{ query }}".</p>
  {% endif %}
{% else %}
  <p>Ingresá una palabra clave para buscar artículos publicados.</p>
{% endif %}

{% endblock %}
